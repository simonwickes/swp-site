---
import PageLayout from "@layouts/PageLayout.astro";
import SchemaService from "@components/seo/SchemaService.astro";
import ServiceHero from "@components/services/ServiceHero.astro";
import ServiceNav from "@components/services/ServiceNav.astro";
import ServiceGallery from "@components/services/ServiceGallery.astro";
import { getServiceBySlug } from "@/data/services";
import type { ImageMetadata } from "astro";

const service = getServiceBySlug("outdoor-portraits")!;

const metaDescription = `${service.title} photography by Simon Wickes in Arizona. ${service.description.split('.')[0]}.`;

const imageModules = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/images/services/outdoor-portraits/*.{jpg,jpeg,png,webp}",
  { eager: true }
);

const images = Object.entries(imageModules)
  .sort(([a], [b]) => a.localeCompare(b))
  .map(([_, mod]) => ({
    image: mod.default,
    alt: `${service.title} photography by Simon Wickes`,
  }));
---

<PageLayout title={service.title} description={metaDescription}>
  <SchemaService
    serviceName={service.title}
    serviceDescription={service.description}
    serviceUrl={`https://simonwickes.com/services/${service.slug}/`}
  />
  <ServiceNav currentSlug="outdoor-portraits" />
  <ServiceHero title={service.title} description={service.description} />
  <section class="mx-auto max-w-6xl px-4 pb-16 md:px-6 md:pb-24">
    <ServiceGallery images={images} galleryId="outdoor-portraits-gallery" />
  </section>
</PageLayout>
