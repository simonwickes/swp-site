---
import { services } from "@/data/services";

interface Props {
  categories?: { slug: string; title: string }[];
  tags: string[];
}

const {
  categories = services.map((s) => ({ slug: s.slug, title: s.title })),
  tags,
} = Astro.props;
---

<div class="blog-discovery-bar mb-8">
  {/* Search input */}
  <div class="relative mb-4">
    <svg
      class="pointer-events-none absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-surface-400 dark:text-surface-500"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      aria-hidden="true"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
      ></path>
    </svg>
    <input
      type="text"
      data-search-input
      placeholder="Search posts..."
      class="w-full rounded-lg border border-surface-200 bg-white py-2.5 pl-10 pr-4 text-sm text-surface-900 placeholder:text-surface-400 focus:border-accent-500 focus:outline-none focus:ring-1 focus:ring-accent-500 dark:border-surface-700 dark:bg-surface-800 dark:text-surface-100 dark:placeholder:text-surface-500 dark:focus:border-accent-400 dark:focus:ring-accent-400"
    />
  </div>

  {/* Filter pills */}
  <div
    class="overflow-x-auto [scrollbar-width:none] [&::-webkit-scrollbar]:hidden"
  >
    <div class="flex items-center gap-1 py-2">
      {/* All pill -- active by default */}
      <button
        data-filter="all"
        class="filter-pill whitespace-nowrap rounded-full px-4 py-2 text-sm font-medium transition-colors bg-accent-500 text-surface-50"
      >
        All
      </button>

      {/* Category pills */}
      {
        categories.map((cat) => (
          <button
            data-filter={cat.slug}
            data-filter-type="category"
            class="filter-pill whitespace-nowrap rounded-full px-4 py-2 text-sm font-medium transition-colors text-surface-600 hover:bg-surface-100 hover:text-accent-500 dark:text-surface-400 dark:hover:bg-surface-800 dark:hover:text-accent-400"
          >
            {cat.title}
          </button>
        ))
      }

      {/* Tag pills -- visually distinct with # prefix and lighter styling */}
      {
        tags.map((tag) => (
          <button
            data-filter={tag}
            data-filter-type="tag"
            class="filter-pill whitespace-nowrap rounded-full border border-surface-200 px-3 py-2 text-sm font-medium transition-colors text-surface-500 hover:border-accent-300 hover:text-accent-500 dark:border-surface-700 dark:text-surface-500 dark:hover:border-accent-600 dark:hover:text-accent-400"
          >
            #{tag}
          </button>
        ))
      }
    </div>
  </div>

  {/* Results count */}
  <span class="results-count mt-2 block text-sm text-surface-500 dark:text-surface-400"
  ></span>
</div>
