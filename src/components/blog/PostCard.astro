---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import { formatPostDate } from "@/utils/formatDate";

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const { title, date, category, featuredImage, featuredImageAlt } = post.data;
---

<a
  href={`/blog/${post.id}/`}
  class="group block overflow-hidden rounded-lg border border-surface-200 bg-surface-50 transition-all duration-200 hover:border-2 hover:border-accent-500 dark:border-surface-700 dark:bg-surface-800"
>
  {
    featuredImage && (
      <div class="aspect-square overflow-hidden">
        <Image
          src={featuredImage}
          alt={featuredImageAlt || title}
          class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
          widths={[400, 600]}
          sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"
        />
      </div>
    )
  }
  <div class="p-4">
    <span
      class="mb-2 inline-block rounded-full bg-surface-200 px-2.5 py-0.5 text-xs font-medium text-surface-700 dark:bg-surface-700 dark:text-surface-300"
    >
      {category.replace(/-/g, " ")}
    </span>
    <h3
      class="mb-2 font-display text-lg font-bold text-surface-900 dark:text-surface-100"
    >
      {title}
    </h3>
    <time class="text-sm text-surface-500 dark:text-surface-400">
      {formatPostDate(date)}
    </time>
  </div>
</a>
