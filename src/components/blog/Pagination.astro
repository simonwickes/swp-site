---
import type { Page } from "astro";

interface Props {
  page: Page;
}

const { page } = Astro.props;
const { currentPage, lastPage, url } = page;

// Don't render if only 1 page
if (lastPage === 1) return;

// Generate page numbers array
const pages = Array.from({ length: lastPage }, (_, i) => i + 1);

// Generate URL for a specific page number
function getPageUrl(pageNum: number): string {
  if (pageNum === 1) return "/blog/";
  return `/blog/${pageNum}/`;
}
---

<nav
  class="flex items-center justify-center gap-2"
  aria-label="Blog pagination"
>
  {/* Previous button */}
  {
    url.prev ? (
      <a
        href={url.prev}
        class="rounded-lg border border-surface-200 px-3 py-2 text-surface-600 transition-colors hover:bg-surface-100 dark:border-surface-700 dark:text-surface-400 dark:hover:bg-surface-800"
        aria-label="Previous page"
      >
        &lsaquo;
      </a>
    ) : (
      <span
        class="pointer-events-none rounded-lg border border-surface-200 px-3 py-2 text-surface-400 opacity-50 dark:border-surface-700 dark:text-surface-600"
        aria-disabled="true"
      >
        &lsaquo;
      </span>
    )
  }

  {/* Page numbers */}
  {
    pages.map((pageNum) =>
      pageNum === currentPage ? (
        <span
          class="rounded-lg bg-accent-500 px-3 py-2 font-medium text-white"
          aria-current="page"
        >
          {pageNum}
        </span>
      ) : (
        <a
          href={getPageUrl(pageNum)}
          class="rounded-lg border border-surface-200 px-3 py-2 text-surface-600 transition-colors hover:bg-surface-100 dark:border-surface-700 dark:text-surface-400 dark:hover:bg-surface-800"
        >
          {pageNum}
        </a>
      )
    )
  }

  {/* Next button */}
  {
    url.next ? (
      <a
        href={url.next}
        class="rounded-lg border border-surface-200 px-3 py-2 text-surface-600 transition-colors hover:bg-surface-100 dark:border-surface-700 dark:text-surface-400 dark:hover:bg-surface-800"
        aria-label="Next page"
      >
        &rsaquo;
      </a>
    ) : (
      <span
        class="pointer-events-none rounded-lg border border-surface-200 px-3 py-2 text-surface-400 opacity-50 dark:border-surface-700 dark:text-surface-600"
        aria-disabled="true"
      >
        &rsaquo;
      </span>
    )
  }
</nav>
