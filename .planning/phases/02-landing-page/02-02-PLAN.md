---
phase: 02-landing-page
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/assets/images/featured/wedding-1.jpg
  - src/assets/images/featured/wedding-2.jpg
  - src/assets/images/featured/portrait-1.jpg
  - src/assets/images/featured/portrait-2.jpg
  - src/assets/images/featured/landscape-1.jpg
  - src/assets/images/featured/landscape-2.jpg
  - src/assets/images/featured/commercial-1.jpg
  - src/assets/images/featured/event-1.jpg
  - src/assets/images/featured/car-1.jpg
  - src/assets/images/featured/car-2.jpg
  - src/assets/images/featured/performance-1.jpg
  - src/assets/images/featured/assignment-1.jpg
  - src/components/home/FeaturedImage.astro
  - src/components/home/FeaturedGrid.astro
  - src/pages/index.astro
  - src/layouts/BaseLayout.astro
autonomous: true

must_haves:
  truths:
    - "User sees a masonry grid of 12 featured images below the hero"
    - "User sees category name label when hovering over a featured image"
    - "Featured images link to their respective service category pages"
    - "User sees two CTAs at end of featured section: explore services + get in touch"
    - "User sees skeleton cards as grid structure while images load"
    - "First hero image is preloaded in document head for optimal LCP"
  artifacts:
    - path: "src/components/home/FeaturedGrid.astro"
      provides: "Masonry grid wrapper for featured images"
      contains: "Masonry"
    - path: "src/components/home/FeaturedImage.astro"
      provides: "Individual grid item with hover category label"
      contains: "group-hover"
    - path: "src/pages/index.astro"
      provides: "Complete landing page composition"
      contains: "HeroCarousel"
  key_links:
    - from: "src/components/home/FeaturedGrid.astro"
      to: "astro-masonry"
      via: "import { Masonry } from astro-masonry"
      pattern: "import.*astro-masonry"
    - from: "src/components/home/FeaturedImage.astro"
      to: "src/pages/services/*.astro"
      via: "href prop linking to service pages"
      pattern: "href.*services/"
    - from: "src/pages/index.astro"
      to: "src/components/home/HeroCarousel.astro"
      via: "component import and render"
      pattern: "import HeroCarousel"
    - from: "src/layouts/BaseLayout.astro"
      to: "first hero image"
      via: "link rel=preload in head"
      pattern: "rel=\"preload\""
---

<objective>
Build the featured work masonry grid, compose the complete landing page by wiring hero carousel + featured grid + CTAs, and optimize LCP with hero image preloading.

Purpose: Complete the homepage so users see hero photography, browse featured work across categories, and find clear calls-to-action.
Output: FeaturedImage.astro, FeaturedGrid.astro, fully composed index.astro, LCP-optimized BaseLayout.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-landing-page/02-CONTEXT.md
@.planning/phases/02-landing-page/02-RESEARCH.md
@.planning/phases/02-landing-page/02-01-SUMMARY.md
@src/components/home/HeroCarousel.astro
@src/components/home/SkeletonCard.astro
@src/components/ui/Button.astro
@src/styles/global.css
@src/layouts/BaseLayout.astro
@src/layouts/PageLayout.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create featured placeholder images and FeaturedImage/FeaturedGrid components</name>
  <files>
    src/assets/images/featured/wedding-1.jpg
    src/assets/images/featured/wedding-2.jpg
    src/assets/images/featured/portrait-1.jpg
    src/assets/images/featured/portrait-2.jpg
    src/assets/images/featured/landscape-1.jpg
    src/assets/images/featured/landscape-2.jpg
    src/assets/images/featured/commercial-1.jpg
    src/assets/images/featured/event-1.jpg
    src/assets/images/featured/car-1.jpg
    src/assets/images/featured/car-2.jpg
    src/assets/images/featured/performance-1.jpg
    src/assets/images/featured/assignment-1.jpg
    src/components/home/FeaturedImage.astro
    src/components/home/FeaturedGrid.astro
  </files>
  <action>
    1. Create 12 placeholder images in `src/assets/images/featured/`. Use varied dimensions to test masonry layout (mix of portrait 800x1200, landscape 1200x800, and square 800x800 aspect ratios). Generate with Sharp or ImageMagick using different warm/earth-tone colors matching the design palette. Name them by category:
       - wedding-1.jpg, wedding-2.jpg (portrait aspect)
       - portrait-1.jpg, portrait-2.jpg (portrait aspect)
       - landscape-1.jpg, landscape-2.jpg (landscape aspect)
       - commercial-1.jpg (landscape aspect)
       - event-1.jpg (landscape aspect)
       - car-1.jpg, car-2.jpg (landscape aspect)
       - performance-1.jpg (portrait aspect)
       - assignment-1.jpg (square aspect)

    2. Create `src/components/home/FeaturedImage.astro`:
       - Props interface: `image` (ImageMetadata), `alt` (string), `category` (string), `href` (string)
       - Outer element: `<a href={href} class="group relative block overflow-hidden rounded-lg">`
       - Image: Astro `<Image>` component with:
         - `src={image}`
         - `alt={alt}`
         - `class="w-full transition-transform duration-300 group-hover:scale-105"`
         - `loading="lazy"`
         - `width={600}` (constrained for grid, Astro handles responsive)
       - Hover overlay: `<div class="absolute inset-0 flex items-end bg-gradient-to-t from-surface-900/80 to-transparent p-4 opacity-0 transition-opacity duration-300 group-hover:opacity-100">`
         - Category label: `<span class="font-display text-lg font-semibold text-surface-50">{category}</span>`
       - NO client directive needed -- pure CSS hover, zero JS

    3. Create `src/components/home/FeaturedGrid.astro`:
       - Import `Masonry` from `astro-masonry`
       - Import `FeaturedImage` component
       - Import `SkeletonCard` component
       - Import all 12 featured images from `@/assets/images/featured/`
       - Define curated array of featured items, each with: `image` (imported), `alt` (descriptive), `category` (display name), `href` (link to service page)
       - Featured items array (12 items covering all 8 categories):
         ```
         { image: wedding1, alt: "...", category: "Weddings", href: "/services/weddings" }
         { image: portrait1, alt: "...", category: "Outdoor Portraits", href: "/services/outdoor-portraits" }
         { image: landscape1, alt: "...", category: "Landscape", href: "/services/landscape" }
         { image: car1, alt: "...", category: "Cars", href: "/services/cars" }
         { image: commercial1, alt: "...", category: "Commercial", href: "/services/commercial" }
         { image: event1, alt: "...", category: "Events", href: "/services/events" }
         { image: performance1, alt: "...", category: "Live Performances", href: "/services/live-performances" }
         { image: assignment1, alt: "...", category: "Assignments", href: "/services/assignments" }
         { image: wedding2, alt: "...", category: "Weddings", href: "/services/weddings" }
         { image: portrait2, alt: "...", category: "Outdoor Portraits", href: "/services/outdoor-portraits" }
         { image: landscape2, alt: "...", category: "Landscape", href: "/services/landscape" }
         { image: car2, alt: "...", category: "Cars", href: "/services/cars" }
         ```
       - Masonry configuration:
         ```
         breakpointCols={{ default: 4, 1100: 3, 700: 2, 500: 1 }}
         ```
       - Map over items rendering `<FeaturedImage>` for each
       - Add `<style>` for grid gap: use Tailwind gap utilities or custom CSS for masonry column spacing (~1rem / 16px gap)

    IMPORTANT: Check astro-masonry's actual API. It may use different prop names or component structure. Read the package source or README if needed.
  </action>
  <verify>
    - `ls src/assets/images/featured/` shows all 12 placeholder images
    - `ls src/components/home/FeaturedImage.astro src/components/home/FeaturedGrid.astro` confirms both exist
    - FeaturedImage.astro contains `group-hover` classes for overlay
    - FeaturedGrid.astro imports Masonry from astro-masonry
    - All 8 service categories represented in featured items array
    - `npm run build` succeeds
  </verify>
  <done>
    12 placeholder featured images exist with varied aspect ratios. FeaturedImage.astro renders individual grid items with hover category labels (CSS-only). FeaturedGrid.astro renders a responsive 4/3/2/1 column masonry grid with all 12 items linking to service pages.
  </done>
</task>

<task type="auto">
  <name>Task 2: Compose landing page and optimize LCP</name>
  <files>
    src/pages/index.astro
    src/layouts/BaseLayout.astro
  </files>
  <action>
    1. Rewrite `src/pages/index.astro` as the complete landing page composition:

       **Structure (top to bottom):**

       a. **Import section:** Import BaseLayout (not PageLayout -- homepage has no standard header padding needed since hero is full-viewport), Header, Footer, HeroCarousel, FeaturedGrid, Button. Also import first hero slide image for preload.

       b. **Layout:** Use BaseLayout directly (not PageLayout) to avoid any default spacing/padding around the hero. Include Header and Footer manually.

       ACTUALLY -- reconsider. The homepage should still have the header (navigation is important) but the hero should go BEHIND/UNDER the header. Use PageLayout but ensure the hero section goes edge-to-edge (no padding). The header from Phase 1 is sticky/fixed, so the hero can sit underneath it.

       Check the current Header.astro to see if it's `sticky` or `fixed`. If sticky, the hero content will push below it. If fixed/absolute, the hero will go behind it. The hero should extend under the header for visual impact, so if the header is sticky (not fixed), you may need to add a negative margin or restructure.

       **Recommended approach:** Use PageLayout as-is. The hero section should be the first child of `<main>`. If the header is sticky (pushes content down), add `class="-mt-[header-height]"` to the hero section to pull it up under the header, OR change the hero to be placed outside `<main>` in a custom layout. Choose whichever approach is cleaner.

       c. **Hero section:** `<HeroCarousel />`

       d. **Intro/CTA section** (after hero, before featured grid):
          - Centered container: `max-w-4xl mx-auto px-6 py-16 md:py-24 text-center`
          - Brief introduction text: 1-2 sentences about Simon's photography (e.g., "From intimate portraits to sweeping landscapes, every frame tells a story.")
          - Use `text-surface-600 dark:text-surface-400` for body text, `font-display` for any heading

       e. **Featured work section:**
          - Section heading: "Featured Work" -- `font-display text-3xl md:text-4xl font-bold text-center mb-12`
          - `<FeaturedGrid />`

       f. **Final CTA section** (after featured grid):
          - Centered container with generous vertical padding: `py-16 md:py-24 text-center`
          - Heading: "Ready to create something beautiful?" or similar
          - Two buttons side-by-side (flex gap-4 justify-center):
            - Primary: `<Button href="/services/outdoor-portraits" variant="primary">Explore Services</Button>` (links to first service as entry point, or a future /services index)
            - Secondary: `<Button href="/contact" variant="secondary">Get in Touch</Button>`

    2. **LCP optimization in BaseLayout.astro:**
       - Add a new optional prop `preloadImage` (string, optional) to BaseLayout's Props interface
       - In the `<head>` section, conditionally render a `<link rel="preload" as="image" href={preloadImage} type="image/webp" />` when preloadImage is provided
       - In index.astro, import the first hero slide and pass its `.src` property to BaseLayout (or PageLayout, which passes it through) as `preloadImage`
       - This ensures the first hero image starts loading before the carousel JS initializes

       **Alternative if PageLayout doesn't pass through:** Add `preloadImage` prop to PageLayout as well, passing through to BaseLayout. OR use Astro's `<head>` slot pattern if BaseLayout supports it.

    3. **Ensure proper spacing:**
       - Hero: full viewport, no padding
       - Intro section: generous vertical padding
       - Featured grid: contained within max-w-7xl with px-4 md:px-6 side padding
       - Final CTA: generous vertical padding, centered
       - Footer follows naturally after CTA section
  </action>
  <verify>
    - `npm run build` succeeds
    - index.astro imports and renders HeroCarousel, FeaturedGrid, and Button components
    - index.astro has both CTA sections (intro + final)
    - BaseLayout.astro has preloadImage prop and conditional link preload tag
    - `npm run build` output shows index.html generated
    - Start dev server and verify homepage loads without console errors: `npm run dev` then check
  </verify>
  <done>
    Homepage (index.astro) renders the complete landing page: full-viewport hero carousel -> intro text -> "Featured Work" masonry grid -> final dual CTAs -> footer. First hero image is preloaded via link tag in document head. Navigation header overlays or sits above the hero. All sections have appropriate spacing and theming.
  </done>
</task>

</tasks>

<verification>
- `npm run build` succeeds with zero errors
- Homepage renders: hero carousel -> intro -> featured grid -> CTAs -> footer
- Featured grid shows 12 images in masonry layout across all 8 service categories
- Category hover labels appear on featured images (CSS-only)
- Two CTA buttons present: "Explore Services" (primary) and "Get in Touch" (secondary)
- First hero image has preload link in document head
- Links from featured images navigate to correct service pages
</verification>

<success_criteria>
- Complete landing page composition is built and renders correctly
- Featured masonry grid shows curated work from all categories
- CTAs are properly positioned after hero and after featured grid
- LCP is optimized with hero image preloading
</success_criteria>

<output>
After completion, create `.planning/phases/02-landing-page/02-02-SUMMARY.md`
</output>
