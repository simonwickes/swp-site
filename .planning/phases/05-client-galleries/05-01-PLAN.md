---
phase: 05-client-galleries
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/data/gallery.ts
  - src/components/ui/Button.astro
  - src/pages/galleries.astro
autonomous: true

must_haves:
  truths:
    - "User can access a client galleries page at /galleries/ that explains how gallery access works"
    - "User sees informational content about password-protected access, downloads, and proofing"
    - "User sees a prominent CTA button linking to the Pic-Time gallery service"
    - "The Pic-Time CTA opens in a new tab (does not navigate away from the site)"
    - "Page renders correctly in both light and dark mode"
  artifacts:
    - path: "src/data/gallery.ts"
      provides: "Centralized Pic-Time gallery URL constant"
      exports: ["GALLERY_URL"]
    - path: "src/components/ui/Button.astro"
      provides: "Button component with external link support"
      contains: "target.*_blank"
    - path: "src/pages/galleries.astro"
      provides: "Client galleries informational page"
      min_lines: 40
  key_links:
    - from: "src/pages/galleries.astro"
      to: "src/data/gallery.ts"
      via: "import GALLERY_URL"
      pattern: "import.*GALLERY_URL.*gallery"
    - from: "src/pages/galleries.astro"
      to: "src/components/ui/Button.astro"
      via: "Button component with external prop"
      pattern: "Button.*external"
---

<objective>
Create the client galleries page with gallery data file and Button component enhancement.

Purpose: Provide existing clients with a clear, informational bridging page that explains how their password-protected photo galleries work and directs them to the Pic-Time gallery platform. This is the primary deliverable for GALL-01 (gallery access explanation) and GALL-02 (navigation to gallery service).

Output: A complete `/galleries/` page with centralized gallery URL configuration and an enhanced Button component supporting external links.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-client-galleries/05-RESEARCH.md

@src/pages/faq.astro (reference pattern for static content page)
@src/pages/contact.astro (reference pattern for static content page)
@src/data/faq.ts (reference pattern for data module)
@src/components/ui/Button.astro (component to extend)
@src/layouts/PageLayout.astro (layout wrapper)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create gallery data file and extend Button component</name>
  <files>src/data/gallery.ts, src/components/ui/Button.astro</files>
  <action>
1. Create `src/data/gallery.ts` following the pattern established by `src/data/faq.ts` and `src/data/services.ts`:

```typescript
// src/data/gallery.ts
// Central configuration for gallery-related URLs.
// Update GALLERY_URL when the photographer's Pic-Time subdomain is confirmed.

/** The primary URL where clients access their Pic-Time galleries */
export const GALLERY_URL = "https://simonwickes.pic-time.com";
```

Keep it simple -- just the URL constant. No interfaces or complex structures needed. The URL is a placeholder that will be confirmed by the photographer.

2. Extend `src/components/ui/Button.astro` to support an `external` boolean prop. When `external` is true, add `target="_blank"` and `rel="noopener noreferrer"` to the anchor tag. This is a non-breaking change -- existing usages without the prop continue to work identically.

Update the Props interface to add `external?: boolean` with default `false`. Use Astro's spread syntax to conditionally add the target/rel attributes:

```astro
{...external ? { target: "_blank", rel: "noopener noreferrer" } : {}}
```

Do NOT change the existing class logic, variant system, or any other behavior. Only add the external link attributes.
  </action>
  <verify>
- `src/data/gallery.ts` exists and exports `GALLERY_URL` as a string
- `src/components/ui/Button.astro` accepts `external` prop
- Run `npx astro check` -- no type errors
- Run `npx astro build` -- builds successfully
  </verify>
  <done>
- `GALLERY_URL` exported from `src/data/gallery.ts` with value `"https://simonwickes.pic-time.com"`
- `Button.astro` renders `target="_blank" rel="noopener noreferrer"` when `external={true}` is passed, and renders without those attributes when `external` is omitted or false
  </done>
</task>

<task type="auto">
  <name>Task 2: Create the galleries page</name>
  <files>src/pages/galleries.astro</files>
  <action>
Create `src/pages/galleries.astro` following the established static page pattern from `faq.astro` and `contact.astro`. Import `PageLayout`, `Button`, and `GALLERY_URL`.

The page structure should be:

1. **Hero/intro section** (`mx-auto max-w-4xl px-6 py-16`):
   - h1: "Client Galleries" (use same heading classes as faq.astro: `mb-4 font-display text-4xl font-bold tracking-tight text-surface-900 dark:text-surface-100`)
   - Intro paragraph explaining that photos are delivered through a password-protected online gallery where clients can view, share, and download at full resolution

2. **How It Works section** (`mx-auto max-w-4xl px-6 pb-16`):
   - h2: "How It Works" (use `mb-6 font-display text-2xl font-bold text-surface-900 dark:text-surface-100`)
   - Grid of 3 feature cards (`grid grid-cols-1 gap-8 md:grid-cols-3`) explaining:
     - **View and Share** -- Browse your full gallery and share favourites with family and friends
     - **Download** -- Download your edited photos at full resolution, ready for printing or sharing
     - **Select Favourites** -- Mark your favourite images and submit selections for albums or prints
   - Each card: centered text with inline SVG icon (h-10 w-10, text-accent-500), h3 title (`font-display text-lg font-semibold text-surface-900 dark:text-surface-100`), description paragraph (`text-surface-600 dark:text-surface-400`)
   - Use simple, recognizable SVG icons: eye/photo icon for View, download-arrow icon for Download, heart/star icon for Favourites

3. **Access Instructions section** (`mx-auto max-w-4xl px-6 pb-16`):
   - h2: "Accessing Your Gallery"
   - Numbered steps explaining the process:
     1. After your session, you will receive an email invitation with a link to your gallery
     2. Create your account using the email address the invitation was sent to
     3. Log in anytime to view, download, and share your photos
   - Style steps as a simple ordered list or descriptive blocks with `text-surface-600 dark:text-surface-400`

4. **CTA section** (`py-16 text-center`):
   - h2: "Ready to view your photos?"
   - Brief paragraph: "Click below to access your gallery. You will need the email address and password from your gallery invitation."
   - Primary Button component with `external={true}` linking to `{GALLERY_URL}`, text "Access Your Gallery"
   - Below the button, a subtle note: "New client? Contact me to book your session." with a link to /contact/

CRITICAL requirements:
- Every text color class MUST have a corresponding `dark:` variant (use the established palette: surface-900/100, surface-600/400, surface-500)
- Import and use `GALLERY_URL` from `@/data/gallery` -- do NOT hardcode the Pic-Time URL
- Use the `Button` component with `external={true}` for the primary CTA
- Set proper `title` and `description` props on PageLayout for SEO
  </action>
  <verify>
- `npx astro build` completes without errors
- `npx astro dev` serves the page at http://localhost:4321/galleries/
- Page content includes all 4 sections (intro, how it works, access instructions, CTA)
- The CTA button renders with `target="_blank"` and `rel="noopener noreferrer"` in the HTML output
- `GALLERY_URL` is imported (not hardcoded) from the data file
  </verify>
  <done>
- `/galleries/` page renders with informational content about gallery access
- Page explains password-protected access, downloads, and favourites selection
- CTA button links to Pic-Time URL and opens in a new tab
- All text is legible in both light and dark mode
- Page follows the same layout pattern as /faq/ and /contact/
  </done>
</task>

</tasks>

<verification>
1. `npx astro build` succeeds with no errors
2. `npx astro dev` -- navigate to http://localhost:4321/galleries/ and confirm:
   - Page loads with proper PageLayout (header, footer, main content)
   - All 4 content sections visible
   - CTA button present with correct href
3. View page source or inspect element: CTA anchor has `target="_blank"` and `rel="noopener noreferrer"`
4. Toggle dark mode: all text remains legible, no invisible or low-contrast elements
</verification>

<success_criteria>
- /galleries/ page exists and renders all informational content
- Gallery URL is centralized in src/data/gallery.ts (single source of truth)
- Button component supports external links without breaking existing usage
- Page is visually consistent with existing content pages (faq, contact)
- Dark mode works correctly on all page elements
</success_criteria>

<output>
After completion, create `.planning/phases/05-client-galleries/05-01-SUMMARY.md`
</output>
